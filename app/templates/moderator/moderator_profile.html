<!DOCTYPE html>
<html>
<head>
    <title>Hồ sơ Moderator - Hệ thống quản trị</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; display: flex; min-height: 100vh; }
        
        /* Sidebar Đồng bộ hệ thống */
        .sidebar { width: 250px; background-color: #1e293b; color: white; position: fixed; height: 100%; display: flex; flex-direction: column; justify-content: space-between; z-index: 50; }
        .sidebar h3 { padding: 20px; font-size: 1.1rem; font-weight: bold; border-bottom: 1px solid #334155; color: #38bdf8; }
        .sidebar a { padding: 12px 20px; text-decoration: none; color: #cbd5e1; display: flex; align-items: center; transition: 0.2s; border-left: 4px solid transparent; }
        .sidebar a:hover, .sidebar a.active { background-color: #334155; border-left: 4px solid #38bdf8; color: white; }
        .sidebar i { width: 20px; margin-right: 12px; text-align: center; }

        .main-content { margin-left: 250px; flex-grow: 1; padding: 40px; }
        
        /* Profile Header */
        .profile-card { background: white; border-radius: 20px; box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1); overflow: hidden; }
        .profile-cover { height: 160px; background: linear-gradient(135deg, #1e293b 0%, #334155 100%); }
        .profile-avatar-wrapper { margin-top: -60px; padding: 0 40px; display: flex; align-items: flex-end; gap: 20px; }
        .profile-avatar { width: 120px; height: 120px; border-radius: 24px; border: 4px solid white; background: #38bdf8; display: flex; justify-content: center; color: white; font-size: 3rem; font-weight: bold; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        /* Stats Grid */
        .stat-badge { padding: 15px; border-radius: 16px; background: #f1f5f9; border: 1px solid #e2e8f0; transition: 0.3s; }
        .stat-badge:hover { transform: translateY(-5px); background: white; border-color: #38bdf8; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); }
        
        .form-input { width: 100%; padding: 12px; border: 1px solid #e2e8f0; border-radius: 10px; outline: none; transition: 0.2s; background: #f8fafc; }
    </style>
</head>
<body onload="loadProfileData()">

    <div class="sidebar">
        <div>
            <h3><i class="fas fa-shield-alt"></i> MODERATOR AREA</h3>
            <nav class="mt-4">
                <a href="/moderator/moderator_dashboard.html"><i class="fas fa-th-large"></i> Dashboard</a>
                <h4 class="px-5 mt-6 mb-2 text-xs font-semibold text-slate-500 uppercase tracking-wider">Hệ thống</h4>
                <a href="/moderator/moderator_products.html"><i class="fas fa-box"></i> Duyệt Sản phẩm</a>
                <a href="/moderator/moderator_users.html"><i class="fas fa-users-slash"></i> Mở/Khóa Tài khoản</a>
                <a href="/moderator/moderator_profile.html" class="active"><i class="fas fa-user-circle"></i> Hồ sơ cá nhân</a>
            </nav>
        </div>
        <div class="pb-6">
            <a href="javascript:void(0)" onclick="handleLogout()" class="text-red-400 hover:bg-red-900/20"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
        </div>
    </div>

    <main class="main-content">
        <div class="profile-card">
            <div class="profile-cover"></div>
            <div class="profile-avatar-wrapper">
                <div class="profile-avatar" id="avatarInitials">M</div>
                <div class="mb-4">

                    <p class="text-slate-500 font-medium"><i class="fas fa-id-badge mr-2"></i>Quyền hạn: Kiểm duyệt viên cấp cao</p>
                </div>
            </div>

            <div class="p-10">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                    <div class="stat-badge">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">Sản phẩm đã duyệt</p>
                        <p class="text-2xl font-black text-slate-800" id="statProducts">1,284</p>
                    </div>
                    <div class="stat-badge">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">Tài khoản đã khóa</p>
                        <p class="text-2xl font-black text-red-600" id="statBanned">156</p>
                    </div>
                    <div class="stat-badge">
                        <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">Ngày hoạt động</p>
                        <p class="text-2xl font-black text-blue-600" id="statDays">42</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 border-t pt-10">
                    <div>
                        <h4 class="text-lg font-bold text-slate-800 mb-6"><i class="fas fa-user-edit mr-2 text-blue-500"></i>Thông tin cơ bản</h4>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-bold text-slate-500 mb-1">Tên tài khoản</label>
                                <input type="text" id="username" class="form-input font-mono text-slate-400" disabled>
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-500 mb-1">Họ và Tên</label>
                                <input type="text" id="fullName" class="form-input" placeholder="Chưa cập nhật">
                            </div>
                            <div>
                                <label class="block text-sm font-bold text-slate-500 mb-1">Email liên lạc</label>
                                <input type="email" id="email" class="form-input" placeholder="email@example.com">
                            </div>
                            <button onclick="updateProfile()" class="bg-slate-800 text-white px-6 py-3 rounded-xl font-bold hover:bg-slate-700 transition w-full shadow-lg shadow-slate-200">
                                Cập nhật hồ sơ
                            </button>
                        </div>
                    </div>

                    <div>
                        <h4 class="text-lg font-bold text-slate-800 mb-6"><i class="fas fa-key mr-2 text-orange-500"></i>Bảo mật tài khoản</h4>
                        <div class="bg-slate-50 p-6 rounded-2xl border border-slate-100">
                            <p class="text-sm text-slate-600 mb-4">Bạn nên thay đổi mật khẩu định kỳ để đảm bảo an toàn cho quyền quản trị.</p>
                            <button class="bg-white border border-slate-200 text-slate-700 px-6 py-3 rounded-xl font-bold hover:bg-slate-50 transition w-full flex items-center justify-center gap-2">
                                <i class="fas fa-shield-alt text-blue-500"></i> Đổi mật khẩu truy cập
                            </button>
                            <div class="mt-6 p-4 bg-blue-50 border border-blue-100 rounded-lg text-xs text-blue-700">
                                <strong>Ghi chú:</strong> Mọi hành động của Moderator đều được lưu log hệ thống để đảm bảo tính minh bạch.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        function loadProfileData() {
            // Giả sử lấy dữ liệu từ localStorage hoặc gọi API
            const user_name = localStorage.getItem('user_name') || 'Moderator_Admin';
            const full_name = localStorage.getItem('full_name') || 'Nguyễn Quản Trị';
            
            document.getElementById('username').value = user_name;
            document.getElementById('fullName').value = full_name;
            document.getElementById('displayFullName').textContent = full_name;
            document.getElementById('avatarInitials').textContent = full_name.charAt(0).toUpperCase();
            
            // Bạn có thể fetch thêm stats từ API backend tại đây
        }

        function updateProfile() {
            const name = document.getElementById('fullName').value;
            // Thực hiện gọi API PUT /api/v1/users/profile
            alert('Yêu cầu cập nhật đã được gửi. Đang chờ hệ thống xử lý.');
        }

        function handleLogout() {
            if(confirm('Xác nhận đăng xuất khỏi hệ thống điều hành?')) {
                localStorage.clear();
                window.location.href = "/";
            }
        }
    </script>
</body>
</html>